{% extends 'base.html' %} {% block content %}

<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lista de Proformas</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css"
    />
    <style>
      .container {
        width: 80%;
        margin: 0 auto;
        background-color: #fff;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        margin-top: 50px;
        position: relative;
      }
      .title-with-icon {
        font-size: 18px;
        color: orange;
        font-size: 16px;
        display: flex;
        align-items: center;
        margin-bottom: 10px;
      }
      .title-with-icon i {
        margin-right: 10px;
        font-size: 2em;
      }
      .title-with-icon h1 {
        margin: 0;
        font-size: 2em;
      }
      .search-container {
        display: flex;
        align-items: center;
        margin-bottom: 20px;
        position: relative;
      }
      .search-container input {
        padding: 8px;
        border-radius: 4px;
        border: 1px solid #ddd;
        margin-right: 10px;
      }
      .search-container .search-button,
      .search-container .filter-button {
        background-color: #4caf50;
        border: none;
        color: white;
        padding: 8px 12px;
        border-radius: 4px;
        cursor: pointer;
        font-size: 16px;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-right: 10px;
      }
      .filter-menu {
        display: none;
        position: absolute;
        top: 100%;
        left: 0;
        background-color: white;
        border: 1px solid #ddd;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        z-index: 1;
      }
      .filter-menu button {
        display: block;
        width: 100%;
        padding: 8px;
        border: none;
        background: none;
        cursor: pointer;
        text-align: left;
      }
      .filter-menu button:hover {
        background-color: #f6d079;
      }
      .header,
      .form-group,
      .line-details,
      .buttons,
      .totals {
        margin: 20px 0;
      }
      label {
        display: block;
        margin-bottom: 5px;
      }
      input[type="text"],
      select {
        margin-top: 15px;
        width: 40%;
        padding: 8px;
        margin-bottom: 10px;
      }
      table {
        width: 100%;
        border-collapse: collapse;
        margin: 20px 0;
      }
      th,
      td {
        border: 1px solid #95defd;
        padding: 8px;
        text-align: left;
      }
      th {
        background-color: #95defd;
      }

      tbody tr:hover {
        background-color: hsl(180, 1%, 83%); /* Cambia el fondo de la fila al pasar el ratón */
        transition: background-color 0.3s; /* Para una transición suave */
    }
    
      tbody td:hover {
        background-color: #efc737; /* Cambia el fondo de la celda al pasar el ratón */
        transition: background-color 0.3s; /* Para una transición suave */
    }


      .save-proforma,
      .create-proforma {
        padding: 10px 20px;
        background-color: #3163f9;
        color: white;
        border: none;
        cursor: pointer;
        font-size: 16px;
        margin-top: 20px;
      }
      .modal-proforma {
        display: none;
        position: fixed;
        z-index: 1;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        overflow: auto;
        background-color: rgb(0, 0, 0);
        background-color: rgba(0, 0, 0, 0.4);
      }
      .modal-content {
        background-color: #fefefe;
        margin: 15% auto;
        padding: 20px;
        border: 1px solid #888;
        width: 80%;
      }
      .close {
        color: #aaa;
        float: right;
        font-size: 28px;
        font-weight: bold;
      }
      .close:hover,
      .close:focus {
        color: black;
        text-decoration: none;
        cursor: pointer;
      }
      .action-icons i {
        background-color: #96c4f5;
        color: red;
        border: none;
        padding: 10px 20px;
        cursor: pointer;
        font-size: 16px;
        border-radius: 5px;
      }
      .fixed-icons {
        position: absolute;
        top: 20px;
        right: 20px;
        display: flex;
        flex-direction: column;
      }
      .fixed-icons button {
        background-color: #ffffff;
        border: 1px solid #ddd;
        color: #3163f9;
        padding: 8px;
        border-radius: 50%;
        margin-bottom: 10px;
        cursor: pointer;
        font-size: 1.5em;
      }
      .create-proforma {
        position: fixed;
        bottom: 20px;
        right: 20px;
        background-color: #4caf50;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 12px;
        border-radius: 50%;
        font-size: 24px;
        color: white;
        width: 50px;
        height: 50px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
      }

      .pagination {
        display: flex;
        justify-content: flex-end;
        align-items: center;
        margin: 10px 190px;
      }
      .pagination-button {
        background-color: #ffffff;
        border: 1px solid #ddd;
        color: #3163f9;
        padding: 8px;
        border-radius: 50%;
        margin: 0 5px;
        cursor: pointer;
        font-size: 1.2em;
      }

      @media (min-width: 1200px) {
        .h1, h1 {
            color: orange;
            font-size: 2.5rem;
        }
    }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="title-with-icon">
        <i class="fa fa-file-invoice-dollar"></i>
        <h1>Proformas</h1>
      </div>
      <div class="search-container">
        <input type="text" id="search" placeholder="Buscar proforma..." />
        <button class="search-button"><i class="fa fa-search"></i></button>
        <div class="filter-container">
          <button class="filter-button" onclick="toggleFilterMenu()"><i class="fa fa-filter"></i></button>
          <div class="filter-menu" id="filter-menu">
            <button onclick="filterBy('ID')">Cliente</button>
            <button onclick="filterBy('Fecha')">Fecha</button>
          </div>
        </div>
      </div>
      <div class="fixed-icons">
        <button title="Download">
          <i class="fa fa-download"></i>
        </button>
        <button title="Print">
          <i class="fa fa-print"></i>
        </button>
      </div>
    </div>

    <div class="pagination">
      <button class="pagination-button">
        <i class="fas fa-chevron-left"></i>
      </button>
      <div class="page-number">Página 1 de 10</div>
      <button class="pagination-button">
        <i class="fas fa-chevron-right"></i>
      </button>
    </div>


    <div class="proforma-list" style="width: 80%; margin: 20px auto">
      <table>
        <thead>
          <tr>
            <th>Fecha</th>
            <th>Cliente</th>
            <th>Código Actividad Económica</th>
            <th>Medio de Pago</th>
            <th>Condición de Venta</th>
            <th>Detalles</th>
            <th>Nota</th>
            <th>Total</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody id="proforma-table-body"></tbody>
      </table>
    </div>

    <div id="proformaModal" class="modal-proforma">
      <div class="modal-content">
        <span class="close">&times;</span>
        <h1>Proforma</h1>
        <div class="header">
          <div class="header-left">
            <p>Fecha: <span id="fecha-proforma">2024-07-18</span></p>
            <p>Moneda: CRC</p>
          </div>
          <div class="header-right">
            <p>
              Venta al por menor artículos de ferretería pinturas madera y
              materiales para la construcción
            </p>
          </div>
        </div>
        <div class="form-group">
          <label for="cliente">Cliente:</label>
          <input
            type="text"
            id="cliente"
            placeholder="Busca por nombre, cédula o teléfono"
          />
        </div>
        <div class="form-group">
          <label for="Código-actividad-económica"
            >Código-actividad-económica:</label
          >
          <select id="Código-actividad-económica">
            <option value="regular">regular</option>
            <!-- other options -->
          </select>
        </div>
        <div class="form-group">
          <label for="medio-pago">Medio de pago:</label>
          <select id="medio-pago">
            <option value="efectivo">Efectivo</option>
            <!-- other options -->
          </select>
          <label for="condición-venta">Condición de venta:</label>
          <select id="condición-venta">
            <option value="contado">Contado</option>
            <!-- other options -->
          </select>
        </div>
        <div class="line-details">
          <h2>Detalles de línea</h2>
          <table id="line-items-table">
            <thead>
              <tr>
                <th>Código</th>
                <th>Descripción</th>
                <th>Cantidad</th>
                <th>Unidad</th>
                <th>Precio Unitario</th>
                <th>Descuento</th>
                <th>Total</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>001</td>
                <td>Producto 1</td>
                <td>1</td>
                <td>unidad</td>
                <td>1000</td>
                <td>0</td>
                <td>1000</td>
              </tr>
              <!-- other rows -->
            </tbody>
          </table>
        </div>
        <div class="totals">
          <h2>Totales</h2>
          <p>Subtotal: <span id="subtotal">1000</span></p>
          <p>Descuento: <span id="descuento">0</span></p>
          <p>Total: <span id="total">1000</span></p>
        </div>
        <div class="buttons">
          <button class="save-proforma">Guardar</button>
        </div>
      </div>
    </div>

    <button class="create-proforma"><i class="fa fa-plus"></i></button>

    <script>
      function toggleFilterMenu() {
        var filterMenu = document.getElementById('filter-menu');
        if (filterMenu.style.display === 'block') {
          filterMenu.style.display = 'none';
        } else {
          filterMenu.style.display = 'block';
        }
      }

      function filterBy(criteria) {
        // Implement filtering logic based on the selected criteria
        console.log(`Filtering by ${criteria}`);
        toggleFilterMenu(); // Close the filter menu after selection
      }

      document.addEventListener('DOMContentLoaded', function () {
        var modal = document.getElementById('proformaModal');
        var btn = document.querySelector('.create-proforma');
        var span = document.querySelector('.close');

        btn.onclick = function () {
          modal.style.display = 'block';
        };

        span.onclick = function () {
          modal.style.display = 'none';
        };

        window.onclick = function (event) {
          if (event.target == modal) {
            modal.style.display = 'none';
          }
        };

        document.querySelector('.save-proforma').onclick = function () {
          saveProforma();
        };
      });

      function saveProforma() {
        var cliente = document.getElementById('cliente').value;
        var codigoActividad = document.getElementById('Código-actividad-económica').value;
        var medioPago = document.getElementById('medio-pago').value;
        var condicionVenta = document.getElementById('condición-venta').value;
        var fecha = document.getElementById('fecha-proforma').innerText;
        var detalles = ''; // Puedes agregar lógica para obtener detalles de la línea
        var nota = ''; // Puedes agregar lógica para obtener la nota
        var total = document.getElementById('total').innerText;

        var tableBody = document.getElementById('proforma-table-body');
        var newRow = tableBody.insertRow();
        newRow.innerHTML = `
          <td>${fecha}</td>
          <td>${cliente}</td>
          <td>${codigoActividad}</td>
          <td>${medioPago}</td>
          <td>${condicionVenta}</td>
          <td>${detalles}</td>
          <td>${nota}</td>
          <td>${total}</td>
          <td class="action-icons">
            <i class="fa fa-edit"></i>
            <i class="fa fa-trash" onclick="deleteRow(this)"></i>
          </td>
        `;

        var modal = document.getElementById('proformaModal');
        modal.style.display = 'none';
      }

      function deleteRow(icon) {
        var row = icon.closest('tr');
        row.remove();
      }
    </script>
  </body>
</html>

{% endblock content %}
